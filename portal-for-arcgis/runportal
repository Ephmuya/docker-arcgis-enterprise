# Docker command to start Portal ArcGIS container in interactive mode;
# you will have to start the server running from a command prompt.
# NOTE: The container will stop when you exit from the shell!

MYNAME="portal"
HOSTNAME=`hostname`

# Stop a previous instance, if any.
docker stop ${MYNAME} > /dev/null 2>&1
docker rm ${MYNAME} > /dev/null 2>&1

echo "Docker is starting in interactive mode."
echo "Portal URL is https://${HOSTNAME}:7443/arcgis/home"
echo "see also https://${HOSTNAME}:7443/arcgis/portaladmin if you get a blank home page"
echo "The command to start Portal is portal/startportal.sh"

docker run -it --rm --name=${MYNAME} --net-alias=${MYNAME} --hostname=${MYNAME} --net=arcgis.net \
  -p 7080:7080 -p 7443:7443 \
  geoceg/portal-for-arcgis bash

echo "${MYNAME} docker removed."
